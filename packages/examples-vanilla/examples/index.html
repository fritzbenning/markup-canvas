<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markup Canvas ðŸ¤¿ </title>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Anek+Tamil:wght@100..800&family=Herr+Von+Muellerhoff&family=Outfit:wght@100..900&display=swap');
    </style>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div class="container" id="canvas">
      <!-- Sample content items -->
      <div class="intro">
        <h1 class="headline-font">Markup Canvas</h1>
        <sup class="decorative-font beta">beta</sup>
      </div>

      <div class="canvas-container" style="top: 700px; left: 200px">
        <div class="feature yellow">
          <h2>Pure HTML content</h2>
          <p>Slam any HTML content or components from your framework of choice onto the canvas.</p>
          <p>No worries about performance.</p>
        </div>
        <div class="feature lilac">
          <h2>Navigate like a falcon</h2>
          <p>Use your cursor, mouse wheel, keyboard or touch gestures to control the canvas.</p>
          <p>Just behave like everywhere else.</p>
        </div>
        <div class="feature green">
          <h2>60+ Frames per second </h2>
          <p>
            Optimized for super-smooth 60fps performance using requestAnimationFrame throttling, batched DOM
            updates, and GPU-accelerated CSS Matrix Transforms.
          </p>
          <p>No worries about performance.</p>
        </div>
      </div>

      <div class="canvas-container" style="bottom: 200px; right: 200px">
        <h2 class="hero-headline">Thanks for exploring!</h2>
      </div>

      <div class="gradient yellow" style="top: 500px; left: 1000px"></div>

      <div class="gradient lilac" style="bottom: 0px; right: 1000px"></div>

      <div class="canvas-container" style="top: 7000px; left: 7000px">
        <blockquote class="blockquote">
          "Donâ€™t Make Me Think"
          <cite>Steve Krug</cite>
        </blockquote>
      </div>

      <div class="emoji-sticker" style="top: 875px; left: 1250px">ðŸ¦…</div>

      <div class="image-item medium" style="top: 1000px; left: 3000px">
        <img
          src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=3000&h=1800&fit=crop&crop=center&q=100"
          alt="Forest path"
        >
      </div>

      <div class="image-item small" style="top: 3000px; left: 8000px">
        <img
          src="https://images.unsplash.com/photo-1439066615861-d1af74d74000?w=2000&h=1350&fit=crop&crop=center&q=100"
          alt="Lake reflection"
        >
      </div>

      <div class="image-item large" style="top: 4000px; left: 15000px">
        <img
          src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=2100&h=3000&fit=crop&crop=center&q=100"
          alt="Waterfall"
        >
      </div>

      <div class="image-item large" style="top: 6000px; left: 12000px">
        <img
          src="https://images.unsplash.com/photo-1501594907352-04cda38ebc29?w=2400&h=1800&fit=crop&crop=center&q=100"
          alt="Sunset beach"
        >
      </div>

      <div class="image-item medium" style="top: 10000px; left: 16000px">
        <img
          src="https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=2400&h=1800&fit=crop&crop=center&q=100"
          alt="City skyline"
        >
      </div>

      <div class="image-item small" style="top: 8000px; left: 3000px">
        <img
          src="https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=1800&h=1350&fit=crop&crop=center&q=100"
          alt="Skyscrapers"
        >
      </div>

      <div class="image-item large" style="top: 9000px; left: 5000px">
        <img
          src="https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?w=2400&h=1800&fit=crop&crop=center&q=100"
          alt="Historic building"
        >
      </div>
    </div>

    <div id="zoom-indicator" class="zoom-indicator">
      <span id="zoom-value">100%</span>
    </div>

    <script type="module">
      import { MarkupCanvas } from '@markup-canvas/core';

      let canvas;

      function initCanvas() {
        const container = document.getElementById("canvas");

        canvas = new MarkupCanvas(container, {
          width: 20000,
          height: 15000,
          enableAcceleration: true,
          enableKeyboard: true,
          requireSpaceForMouseDrag: false,
          requireOptionForClickZoom: false,
          enableClickToZoom: true,
          enableRulers: true,
          enableGrid: true,
          gridColor: "rgba(0, 0, 0, 0.08)",
        });

        // Listen to zoom events using the new EventEmitter
        canvas.on('zoom', (zoom) => {
          updateZoomDisplay({ scale: zoom });
        });

        if (canvas && canvas.container) {
          canvas.container.focus();
        }

        setupZoomIndicator();
      }

      function updateZoomDisplay(transform) {
        const zoomValueElement = document.getElementById('zoom-value');
        if (zoomValueElement && transform) {
          const zoomPercent = Math.round(transform.scale * 100);
          zoomValueElement.textContent = `${zoomPercent}%`;
        }
      }

      function setupZoomIndicator() {
        const zoomValueElement = document.getElementById('zoom-value');
        
        // Initial display update
        if (canvas && canvas.transform) {
          updateZoomDisplay(canvas.transform);
        }
      }

      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", initCanvas);
      } else {
        initCanvas();
      }
    </script>
  </body>
</html>
